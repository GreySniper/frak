<!doctype html>
<html>

<head>
    <meta charset="UTF-8">

    <link rel="stylesheet" type="text/css" href="css/bootstrap.min.css" />
    <link rel="stylesheet" type="text/css" href="fonts/trakt.css" />
    <link rel="stylesheet" type="text/css" href="fonts/proxima.css" />
    <link rel="stylesheet" type="text/css" href="fonts/font-awesome.min.css" />

    <link rel="stylesheet" type="text/css" href="css/main.css" />
    <link rel="stylesheet" type="text/css" href="css/animations.css" />
    <link rel="stylesheet" type="text/css" href="css/themes/dark.css" id="theme" />

    <script src="js/vendor/jquery.js" type="application/javascript"></script>
    <script src="js/vendor/jquery-ui.js" type="application/javascript"></script>
    <script src="js/vendor/jquery-scrollintoview.js" type="application/javascript"></script>
    <script src="js/vendor/bootstrap.min.js" type="application/javascript"></script>

    <script src="js/config.js" type="application/javascript"></script>

    <script src="js/utils/boot.js" type="application/javascript"></script>
    <script src="js/utils/db.js" type="application/javascript"></script>
    <script src="js/utils/keyboard.js" type="application/javascript"></script>
    <script src="js/utils/localization.js" type="application/javascript"></script>
    <script src="js/utils/misc.js" type="application/javascript"></script>
    <script src="js/utils/notify.js" type="application/javascript"></script>
    <script src="js/utils/update.js" type="application/javascript"></script>

    <script src="js/lib/trakt.js" type="application/javascript"></script>
    <script src="js/lib/local.js" type="application/javascript"></script>
    <script src="js/lib/images.js" type="application/javascript"></script>
    <script src="js/lib/player.js" type="application/javascript"></script>

    <script src="js/main/interface.js" type="application/javascript"></script>
    <script src="js/main/collection.js" type="application/javascript"></script>
    <script src="js/main/items.js" type="application/javascript"></script>
    <script src="js/main/details.js" type="application/javascript"></script>
    <script src="js/main/loading.js" type="application/javascript"></script>

    <script src="js/app.js" type="application/javascript"></script>

    <!-- set icon and title -->
    <script>
        document.write('<link rel="icon" type="image/png" href="' + PKJSON.icon + '" />')
        document.write('<title>' + PKJSON.releaseName + '</title>')
    </script>
</head>

<body>
    <div id="app">
        <section id="init" style="display:none">
            <div id="traktinit">
                <img src="images/trakt-logo.png"/>
                <p><i18n>You need a Trakt.tv account</i18n></p>

                <button id="traktAuth" onClick="Trakt.login()">
                    <i18n>Connect</i18n>
                </button>
                <input style="display:none" id="traktCode" value=""/>

                <a class="createaccount" onClick="Misc.openExternal('https://trakt.tv/auth/join')">
                    <i18n>Create an account online</i18n>
                </a>
            </div>
            <div id="traktwelcome" style="display:none">
                <div id="welcomeprofile" style="display:none">
                    <img class="avatar" src="images/trakt-logo.png"/>
                    <p><span class="welcomemessage"></span> <span class="username"></span></p>
                </div>

                <div class="spinner" style="display:none">
                    <div class="double-bounce1"></div>
                    <div class="double-bounce2"></div>
                </div>
            </div>
            <div id="requirempv" style="display:none">
                <img src="images/mpv-logo.png"/>
                <p><i18n>MPV player needs to be installed</i18n></p>
                
                <button id="downloadMPV" onClick="Misc.openExternal('https://mpv.io/installation/')">
                    <i18n>Download</i18n>
                </button>

                <a class="skipMPV" onClick="Interface.showMain()">
                    <i18n>It's done</i18n>
                </a>
            </div>
        </section>

        <section id="navbar" style="display:none">
            <div class="nav movies" onClick="Interface.showMovies()">
                <div class="fa fa-spin fa-refresh"></div>
                <div class="fa fa-film">
                    <div class="text"><i18n>Movies</i18n></div>
                </div>
            </div>
            <div class="nav shows active" onClick="Interface.showShows()">
                <div class="fa fa-spin fa-refresh"></div>
                <div class="fa fa-television">
                    <div class="text"><i18n>Shows</i18n></div>
                </div>
            </div>
            <div class="nav locals" onClick="Interface.showLocals()">
                <div class="fa fa-spin fa-refresh"></div>
                <div class="fa fa-folder">
                    <div class="text"><i18n>Local</i18n></div>
                </div>
            </div>
            <div class="nav settings" onClick="Interface.showSettings()">
                <div class="fa fa-cogs">
                    <div class="text"><i18n>Settings</i18n></div>
                </div>
            </div>
            <div class="online"></div>
        </section>
        
        <section id="collection" style="display:none">
            <div class="row" id="shows"></div>
            <div class="row" id="movies" style="display:none"></div>

            <div id="locals" style="display:none">
                <div class="refreshing">
                    <div class="fa fa-spin fa-refresh"></div>
                    <i18n>Updating...</i18n>
                </div>

                <div class="categories">
                    <div class="waitforlibrary">
                        <div class="waitmessage">
                            <div class="spinner">
                                <div class="double-bounce1"></div>
                                <div class="double-bounce2"></div>
                            </div>
                            <i18n>Please wait, scan in progress...</i18n>
                        </div>
                    </div>
                    <div class="category movies" onClick="Interface.locals.show('movies')">
                        <div class="fa fa-film">
                            <div class="text"><i18n>Movies</i18n></div>
                        </div>
                    </div>
                    <div class="category shows" onClick="Interface.locals.show('shows')">
                        <div class="fa fa-television">
                            <div class="text"><i18n>Shows</i18n></div>
                        </div>
                    </div>
                    <div class="category unmatched" onClick="Interface.locals.show('unmatched')">
                        <div class="fa fa-file-o">
                            <div class="text"><i18n>Other</i18n></div>
                        </div>
                    </div>
                </div>

                <div class="items movies" style="display:none">
                    <div class="row"></div>
                </div>
                <div class="items shows" style="display:none">
                    <div class="row"></div>
                </div>
                <div class="items unmatched" style="display:none">
                    <div class="row"></div>
                </div>
            </div>
        </section>

        <section id="settings" style="display:none">
            <div class="setting trakt">
                <div class="title">Trakt.tv</div>
                <div class="option">
                    <div class="text">
                        <i18n>Your are connected as</i18n> <span class="username"></span>
                    </div>
                    <div class="action">
                        <button class="disconnect" onClick="Trakt.disconnect()">
                            <i18n>Disconnect</i18n>
                        </button>
                    </div>
                </div>
                <div class="option">
                    <div class="text">
                        <i18n>Force a reload</i18n>
                    </div>
                    <div class="action">
                        <button class="reload" onClick="Trakt.reload()">
                            <i18n>Reload</i18n>
                        </button>
                    </div>
                </div>
            </div>
            <div class="setting locals">
                <div class="title"><i18n>Local library</i18n></div>
                <div class="option">
                    <div class="text">
                        <i18n>Search paths</i18n>
                    </div>
                    <div class="action">
                        <div class="pathbox">
                            <div class="paths"></div>
                            <input id="hidden-input-local" type="file" nwdirectory/>
                            <button onClick="Interface.addLocalPath()">
                                <i18n>Add</i18n>
                            </button>
                            <button class="remove" onClick="Interface.removeLocalPath()">
                                <i18n>Remove</i18n>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
            <div class="setting interface">
                <div class="title"><i18n>Interface</i18n></div>
                <div class="option">
                    <div class="text">
                        <i18n>Items per row</i18n>
                    </div>
                    <div class="action">
                        2&nbsp;
                        <label class="switch">
                            <input id="items-per-row" type="checkbox">
                            <span class="slider round"></span>
                        </label>
                        &nbsp;3
                    </div>
                </div>
            </div>
            <div class="setting mpv">
                <div class="title"><i18n>Player</i18n></div>
                <div class="option">
                    <div class="text">
                        <i18n>Path to MPV</i18n>
                    </div>
                    <div class="action">
                        <input id="mpvpath" type="file"/>
                        <input id="fakempvpath" type="text" readonly onClick="Interface.setMPVPath()"/>
                    </div>
                </div>
            </div>
        </section>

        <section id="trailer" style="display:none" onClick="Interface.closeTrailer()">
            <div class="spinner">
                <div class="double-bounce1"></div>
                <div class="double-bounce2"></div>
            </div>
            <div class="video"></div>
        </section>

        <div id="notification-snack" onClick="$(this).hide()"></div>
    </div>

    <!-- code initialization -->
    <script>
        gui.start().then(() => {
            Trakt.reconnect();
            win.show(true);
            win.focus();
        });
    </script>
</body>

</html>